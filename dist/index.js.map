{"version":3,"file":"index.js","sources":["../src/DisplayEditor.tsx","../src/ReactJsonEditor.tsx"],"sourcesContent":["import React from 'react';\r\ninterface IDisplayEditorProps { \r\n\tjson: any, \r\n\tpath: any[], \r\n\ttype: string, \r\n\tchildren: React.ReactNode, \r\n\tclassName?: string \r\n}\r\nexport const DisplayEditor: React.FC<IDisplayEditorProps> = (props: IDisplayEditorProps) => {\r\n\tconst handleDivClick = (event: React.MouseEvent, path: any[]) => {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\t\tlet curKeyValue = props.json;\r\n\t\tfor (var i = 0; i < path.length - 1; i++) {\r\n\t\t\tlet level = path[i];\r\n\t\t\tcurKeyValue = curKeyValue[level];\r\n\t\t}\r\n\t\tlet lastPath = path[path.length - 1];\r\n\t\tconsole.log({ lastPath, value: curKeyValue[lastPath] });\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tonClick={(event: React.MouseEvent) => handleDivClick(event, props.path)}\r\n\t\t\tclassName={props.className}\r\n\t\t>\r\n\t\t\t{props.children}\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useState } from 'react';\r\nimport { DisplayEditor } from './DisplayEditor';\r\n\r\nexport const JsonEditor: React.FC<{ json: any }> = (json: any) => {\r\n\tconst [curJson, setCurJson] = useState<any>(json);\r\n    const keyFormat = (key: string) => `\"${key}\"`;\r\n\t\r\n\tconst formatJSON = (json: any, path: any[]): React.ReactNode => {\r\n\t\tconst keys = Object.keys(json);\r\n\t\tlet nodeArray = [];\r\n\t\tfor (let i = 0; i < keys.length; i++) {\r\n\t\t\tconst key = keys[i];\r\n\t\t\tconst jsonValue = json[key];\r\n\t\t\tlet curPath = path.concat(key);\r\n\t\t\tif (Array.isArray(jsonValue)) {\r\n\t\t\t\tconst arrValue = jsonValue as unknown[];\r\n\t\t\t\tlet arrNodeArray = [];\r\n\t\t\t\tfor (let j = 0; j < arrValue.length; j++) {\r\n\t\t\t\t\tlet curPath = path.concat(key, j);\r\n\t\t\t\t\tlet subArr = arrValue[j];\r\n\t\t\t\t\tarrNodeArray.push(\r\n                        <DisplayEditor json={curJson} path={curPath} type=\"object\">\r\n                            &#123; {formatJSON(subArr, curPath)} &#125; {j < arrValue.length - 1 ? ',' : ''}\r\n                        </DisplayEditor>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tnodeArray.push(\r\n                    <DisplayEditor json={curJson} path={curPath} type=\"array\">\r\n                        [-] {keyFormat(key)}: [ {arrNodeArray} ]\r\n                    </DisplayEditor>\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tswitch (typeof jsonValue) {\r\n\t\t\t\t\tcase 'string':\r\n\t\t\t\t\t\tnodeArray.push(\r\n                            <DisplayEditor json={curJson} path={curPath} type=\"string\">\r\n                                {keyFormat(key)}: <span className=\"json-editor-string\">\"{jsonValue}\"</span> {i < keys.length - 1 ? ',' : ''}\r\n                            </DisplayEditor>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'number':\r\n\t\t\t\t\t\tnodeArray.push(\r\n                            <DisplayEditor json={curJson} path={curPath} type=\"number\">\r\n\t\t\t\t\t\t\t\t{keyFormat(key)}: <span className=\"json-editor-number\">{jsonValue}</span> {i < keys.length - 1 ? ',' : ''}\r\n\t\t\t\t\t\t\t</DisplayEditor>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'boolean':\r\n                        const boolDisplay = (jsonValue: boolean) => <span className={`json-editor-bool-${jsonValue}`}>{jsonValue.toString()}</span>\r\n\t\t\t\t\t\tnodeArray.push(\r\n                            <DisplayEditor json={curJson} path={curPath} type=\"boolean\">\r\n\t\t\t\t\t\t\t\t{keyFormat(key)}: {boolDisplay(jsonValue)} {i < keys.length - 1 ? ',' : ''}\r\n\t\t\t\t\t\t\t</DisplayEditor>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tnodeArray.push(\r\n                            <DisplayEditor json={curJson} path={curPath} type=\"object\">\r\n                                {keyFormat(key)}: &#123; {formatJSON(jsonValue, curPath)} &#125;{' '}\r\n\t\t\t\t\t\t\t\t{i < keys.length - 1 ? ',' : ''}\r\n                            </DisplayEditor>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn nodeArray;\r\n\t};\r\n\r\n\treturn <div className={'json-editor'}>\r\n        {curJson && formatJSON(curJson, [])}\r\n    </div>;\r\n};\r\n"],"names":["React","useState"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAQO,IAAM,aAAa,GAAkC,UAAC,KAA0B;IACtF,IAAM,cAAc,GAAG,UAAC,KAAuB,EAAE,IAAW;QAC3D,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,KAAK,CAAC,eAAe,EAAE,CAAC;QACxB,IAAI,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC;QAC7B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YACzC,IAAI,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YACpB,WAAW,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;SACjC;QACD,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACrC,OAAO,CAAC,GAAG,CAAC,EAAE,QAAQ,UAAA,EAAE,KAAK,EAAE,WAAW,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;KACxD,CAAC;IAEF,QACCA,iDACC,OAAO,EAAE,UAAC,KAAuB,IAAK,OAAA,cAAc,CAAC,KAAK,EAAE,KAAK,CAAC,IAAI,CAAC,GAAA,EACvE,SAAS,EAAE,KAAK,CAAC,SAAS,IAEzB,KAAK,CAAC,QAAQ,CACV,EACL;AACH,CAAC;;IC1BY,UAAU,GAA4B,UAAC,IAAS;IACtD,IAAA,KAAwBC,cAAQ,CAAM,IAAI,CAAC,EAA1C,OAAO,QAAA,EAAE,UAAU,QAAuB,CAAC;IAC/C,IAAM,SAAS,GAAG,UAAC,GAAW,IAAK,OAAA,OAAI,GAAG,OAAG,GAAA,CAAC;IAEjD,IAAM,UAAU,GAAG,UAAC,IAAS,EAAE,IAAW;QACzC,IAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/B,IAAI,SAAS,GAAG,EAAE,CAAC;QACnB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,IAAM,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YACpB,IAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;YAC5B,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAC/B,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;gBAC7B,IAAM,QAAQ,GAAG,SAAsB,CAAC;gBACxC,IAAI,YAAY,GAAG,EAAE,CAAC;gBACtB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBACzC,IAAI,SAAO,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;oBAClC,IAAI,MAAM,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;oBACzB,YAAY,CAAC,IAAI,CACED,wCAAC,aAAa,IAAC,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,SAAO,EAAE,IAAI,EAAC,QAAQ;;wBAC9C,UAAU,CAAC,MAAM,EAAE,SAAO,CAAC;;wBAAU,CAAC,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,CACnE,CAClC,CAAC;iBACF;gBACD,SAAS,CAAC,IAAI,CACEA,wCAAC,aAAa,IAAC,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAC,OAAO;;oBAChD,SAAS,CAAC,GAAG,CAAC;;oBAAM,YAAY;yBACzB,CAC/B,CAAC;aACF;iBAAM;gBACN,QAAQ,OAAO,SAAS;oBACvB,KAAK,QAAQ;wBACZ,SAAS,CAAC,IAAI,CACQA,wCAAC,aAAa,IAAC,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAC,QAAQ;4BACrD,SAAS,CAAC,GAAG,CAAC;;4BAAGA,kDAAM,SAAS,EAAC,oBAAoB;;gCAAG,SAAS;qCAAS;;4BAAE,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,CAC/F,CACrC,CAAC;wBACF,MAAM;oBACP,KAAK,QAAQ;wBACZ,SAAS,CAAC,IAAI,CACQA,wCAAC,aAAa,IAAC,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAC,QAAQ;4BAC7E,SAAS,CAAC,GAAG,CAAC;;4BAAGA,kDAAM,SAAS,EAAC,oBAAoB,IAAE,SAAS,CAAQ;;4BAAE,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,CAC1F,CAChB,CAAC;wBACF,MAAM;oBACP,KAAK,SAAS;wBACK,IAAM,WAAW,GAAG,UAAC,SAAkB,IAAK,OAAAA,kDAAM,SAAS,EAAE,sBAAoB,SAAW,IAAG,SAAS,CAAC,QAAQ,EAAE,CAAQ,GAAA,CAAA;wBAC7I,SAAS,CAAC,IAAI,CACQA,wCAAC,aAAa,IAAC,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAC,SAAS;4BAC9E,SAAS,CAAC,GAAG,CAAC;;4BAAI,WAAW,CAAC,SAAS,CAAC;;4BAAG,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,CAC3D,CAChB,CAAC;wBACF,MAAM;oBACP;wBACC,SAAS,CAAC,IAAI,CACQA,wCAAC,aAAa,IAAC,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAC,QAAQ;4BACrD,SAAS,CAAC,GAAG,CAAC;;4BAAW,UAAU,CAAC,SAAS,EAAE,OAAO,CAAC;;4BAAS,GAAG;4BAC3F,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,CACK,CACrC,CAAC;wBACF,MAAM;iBACP;aACD;SACD;QACD,OAAO,SAAS,CAAC;KACjB,CAAC;IAEF,OAAOA,iDAAK,SAAS,EAAE,aAAa,IAC5B,OAAO,IAAI,UAAU,CAAC,OAAO,EAAE,EAAE,CAAC,CACjC,CAAC;AACX;;;;"}